pipeline{
    agent any
/*
     tools {
            jdk "1.8"
            maven "3.8.4"
        }
        */

/*parameters{
booleanParam(defaultValue: true, description: 'run tests', name: 'UITests')
}*/
stages {
        stage ('Compile Stage') {

            steps {
                withMaven(maven : 'maven_3_5_0') {
                    sh 'mvn clean compile'
                }
            }
        }
   stages {
         stage('UITests') {
           steps {
             container('maven') {
               sh 'mvn test'
             }
           }
post {
          always {
            script {
              allure([
                includeProperties: false,
                jdk: '',
                properties: [],
                reportBuildPolicy: 'ALWAYS',
                results: [[path: 'target/allure-results']]
              ])
     }
    }
   }
  }
 }
}